import './polyfills.server.mjs';
import{$ as E,B as P,Ca as j,Da as B,Ea as $,G as a,Ha as U,I as p,K as w,O as f,Oa as F,Pa as g,V as v,W as o,X as t,Y as M,Ya as H,Z as _,_ as C,aa as D,ca as r,da as b,ea as l,fa as R,g as d,ha as k,j as c,o as u,p as x}from"./chunk-MIL7INQR.mjs";import"./chunk-X2SEQXRR.mjs";var I=class i{constructor(e){this.http=e}baseUrl="http://localhost:8080/reports";getSummaryReport(){return this.http.get(`${this.baseUrl}/summary`)}getMonthlyReport(e,n){let s=new F().set("month",e.toString()).set("year",n.toString());return this.http.get(`${this.baseUrl}/monthly`,{params:s})}static \u0275fac=function(n){return new(n||i)(c(g))};static \u0275prov=d({token:i,factory:i.\u0275fac,providedIn:"root"})};var O=class i{constructor(e){this.http=e}baseUrl="http://localhost:8080/incomes";addIncome(e){return this.http.post(this.baseUrl,e)}getAllIncomes(){return this.http.get(this.baseUrl)}getIncomeById(e){return this.http.get(`${this.baseUrl}/${e}`)}updateIncome(e,n){return this.http.put(`${this.baseUrl}/${e}`,n)}deleteIncome(e){return this.http.delete(`${this.baseUrl}/${e}`)}static \u0275fac=function(n){return new(n||i)(c(g))};static \u0275prov=d({token:i,factory:i.\u0275fac,providedIn:"root"})};var y=class i{constructor(e){this.http=e}baseUrl="http://localhost:8080/expenses";addExpense(e){return this.http.post(this.baseUrl,e)}getAllExpenses(){return this.http.get(this.baseUrl)}getExpenseById(e){return this.http.get(`${this.baseUrl}/${e}`)}updateExpense(e,n){return this.http.put(`${this.baseUrl}/${e}`,n)}deleteExpense(e){return this.http.delete(`${this.baseUrl}/${e}`)}static \u0275fac=function(n){return new(n||i)(c(g))};static \u0275prov=d({token:i,factory:i.\u0275fac,providedIn:"root"})};function Y(i,e){if(i&1&&(o(0,"div")(1,"div",22)(2,"p")(3,"strong"),r(4,"Income:"),t(),r(5),t(),o(6,"p")(7,"strong"),r(8,"Expense:"),t(),r(9),t(),o(10,"p")(11,"strong"),r(12,"Balance:"),t(),r(13),t()()()),i&2){let n=E();a(5),l(" \u20B9",n.monthly.totalIncome),a(4),l(" \u20B9",n.monthly.totalExpense),a(4),l(" \u20B9",n.monthly.balance)}}function L(i,e){i&1&&(o(0,"p",23),r(1,"No monthly data available"),t())}function W(i,e){if(i&1){let n=_();o(0,"tr",24)(1,"td",19),r(2),t(),o(3,"td",19),r(4),t(),o(5,"td",19),r(6),t(),o(7,"td",25)(8,"button",26),C("click",function(){let m=u(n).$implicit,h=E();return x(h.deleteIncome(m.id))}),r(9,"Delete"),t()()()}if(i&2){let n=e.$implicit;a(2),b(n.source),a(2),l("\u20B9",n.amount),a(2),b(n.date)}}function q(i,e){if(i&1){let n=_();o(0,"tr",24)(1,"td",19),r(2),t(),o(3,"td",19),r(4),t(),o(5,"td",19),r(6),t(),o(7,"td",19),r(8),t(),o(9,"td",25)(10,"button",26),C("click",function(){let m=u(n).$implicit,h=E();return x(h.deleteExpense(m.id))}),r(11,"Delete"),t()()()}if(i&2){let n=e.$implicit;a(2),b(n.category),a(2),l("\u20B9",n.amount),a(2),b(n.description),a(2),b(n.date)}}var A=class i{constructor(e,n,s,m,h){this.reportService=e;this.incomeService=n;this.expenseService=s;this.router=m;this.platformId=h;this.isBrowser=U(this.platformId)}isBrowser;summary;monthly;incomes=[];expenses=[];currentMonth=new Date().getMonth()+1;currentYear=new Date().getFullYear();ngOnInit(){this.loadSummary(),this.loadMonthly(),this.loadIncomes(),this.loadExpenses()}loadSummary(){this.reportService.getSummaryReport().subscribe({next:e=>this.summary=e,error:e=>console.error("Error loading summary",e)})}loadMonthly(){this.reportService.getMonthlyReport(this.currentMonth,this.currentYear).subscribe({next:e=>this.summary=e,error:e=>console.error("Error loading monthly",e)})}loadIncomes(){this.incomeService.getAllIncomes().subscribe({next:e=>this.incomes=e.slice(-5).reverse(),error:e=>console.error("Error loading incomes",e)})}deleteIncome(e){confirm("Delete this income?")&&this.incomeService.deleteIncome(e).subscribe({next:()=>this.loadIncomes(),error:n=>console.error("Error Deleting income",n)})}loadExpenses(){this.expenseService.getAllExpenses().subscribe({next:e=>this.expenses=e.slice(-5).reverse(),error:e=>console.error("Error loading expense",e)})}deleteExpense(e){confirm("Delete this expense?")&&this.expenseService.deleteExpense(e).subscribe({next:()=>this.loadExpenses(),error:n=>console.error("Error deleting expense",n)})}logout(){this.isBrowser&&localStorage.removeItem("isLoggedIn"),this.router.navigate(["/login"])}static \u0275fac=function(n){return new(n||i)(p(I),p(O),p(y),p(H),p(P))};static \u0275cmp=w({type:i,selectors:[["app-dashboard"]],decls:66,vars:9,consts:[["noMonthly",""],[1,"dashboard-root","p-6","bg-gray-50","min-h-screen","space-y-8"],[1,"dashboard-header"],[3,"click"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4"],[1,"bg-white","shadow","rounded-lg","p-4","text-center"],[1,"text-lg","font-semibold","mb-2"],[1,"text-green-600","text-2xl","font-bold"],[1,"text-red-600","text-2xl","font-bold"],[1,"text-blue-600","text-2xl","font-bold"],[1,"bg-white","shadow","rounded-lg","p-4"],[1,"text-xl","font-semibold","mb-4"],[4,"ngIf","ngIfElse"],[1,"flex","justify-between","items-center","mb-4"],[1,"text-xl","font-semibold"],[1,"bg-green-500","text-white","px-3","py-1","rounded"],[1,"w-full","border-collapse"],[1,"bg-gray-100"],[1,"p-2","text-left"],[1,"p-2"],["class","border-b",4,"ngFor","ngForOf"],[1,"bg-red-500","text-white","px-3","py-1","rounded"],[1,"flex","justify-between"],[1,"text-gray-500"],[1,"border-b"],[1,"p-2","text-right"],[1,"text-red-600","hover:underline",3,"click"]],template:function(n,s){if(n&1){let m=_();o(0,"div",1)(1,"div",2)(2,"h1"),r(3,"Welcome to Dashboard"),t(),o(4,"button",3),C("click",function(){return u(m),x(s.logout())}),r(5,"Logout"),t()(),o(6,"div",4)(7,"div",5)(8,"h2",6),r(9,"Total Income"),t(),o(10,"p",7),r(11),t()(),o(12,"div",5)(13,"h2",6),r(14,"Total Expense"),t(),o(15,"p",8),r(16),t()(),o(17,"div",5)(18,"h2",6),r(19,"Balance"),t(),o(20,"p",9),r(21),t()()(),o(22,"div",10)(23,"h2",11),r(24),t(),f(25,Y,14,3,"div",12)(26,L,2,0,"ng-template",null,0,k),t(),o(28,"div",10)(29,"div",13)(30,"h2",14),r(31,"\u{1F4B0} Recent Incomes"),t(),o(32,"button",15),r(33,"+ Add"),t()(),o(34,"table",16)(35,"thead")(36,"tr",17)(37,"th",18),r(38,"Source"),t(),o(39,"th",18),r(40,"Amount"),t(),o(41,"th",18),r(42,"Date"),t(),M(43,"th",19),t()(),o(44,"tbody"),f(45,W,10,3,"tr",20),t()()(),o(46,"div",10)(47,"div",13)(48,"h2",14),r(49,"\u{1F4B8} Recent Expenses"),t(),o(50,"button",21),r(51,"+ Add"),t()(),o(52,"table",16)(53,"thead")(54,"tr",17)(55,"th",18),r(56,"Category"),t(),o(57,"th",18),r(58,"Amount"),t(),o(59,"th",18),r(60,"Description"),t(),o(61,"th",18),r(62,"Date"),t(),M(63,"th",19),t()(),o(64,"tbody"),f(65,q,12,4,"tr",20),t()()()()}if(n&2){let m=D(27);a(11),l(" \u20B9",(s.summary==null?null:s.summary.totalIncome)||0," "),a(5),l(" \u20B9",(s.summary==null?null:s.summary.totalExpense)||0," "),a(5),l(" \u20B9",(s.summary==null?null:s.summary.balance)||0," "),a(3),R(" \u{1F4C5} Monthly Report (",s.currentMonth,"/",s.currentYear,") "),a(),v("ngIf",s.monthly)("ngIfElse",m),a(20),v("ngForOf",s.incomes),a(20),v("ngForOf",s.expenses)}},dependencies:[$,j,B],styles:["[_nghost-%COMP%]{display:block;box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial;color:#1f2937}.dashboard-root[_ngcontent-%COMP%]{padding:1.5rem;min-height:100vh;background:#f8fafc;gap:2rem}.dashboard-root[_ngcontent-%COMP%]   .summary-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:1rem;margin-bottom:1.5rem}@media (min-width: 768px){.dashboard-root[_ngcontent-%COMP%]   .summary-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}.dashboard-root[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{background:#fff;border-radius:10px;padding:1rem;box-shadow:0 6px 16px #1f29370f;border:1px solid rgba(31,41,55,.04);display:flex;flex-direction:column;justify-content:center;align-items:center}.dashboard-root[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 .5rem;font-size:1rem;color:#374151}.dashboard-root[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{font-weight:700;font-size:1.5rem}.dashboard-root[_ngcontent-%COMP%]   .income[_ngcontent-%COMP%]{color:#16a34a}.dashboard-root[_ngcontent-%COMP%]   .expense[_ngcontent-%COMP%]{color:#dc2626}.dashboard-root[_ngcontent-%COMP%]   .balance[_ngcontent-%COMP%]{color:#2563eb}.dashboard-root[_ngcontent-%COMP%]   .monthly[_ngcontent-%COMP%]{background:#fff;padding:1rem;border-radius:10px;box-shadow:0 6px 16px #1f29370f;border:1px solid rgba(31,41,55,.04)}.dashboard-root[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:.95rem;background:transparent}.dashboard-root[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{background:#f3f4f6}.dashboard-root[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .dashboard-root[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.6rem .75rem;text-align:left;border-bottom:1px solid rgba(31,41,55,.06)}.dashboard-root[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#0f172a05}.dashboard-root[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;border:none;padding:.45rem .8rem;border-radius:8px;cursor:pointer;font-weight:600;font-size:.9rem}.dashboard-root[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background:#10b981;color:#fff}.dashboard-root[_ngcontent-%COMP%]   .btn-danger[_ngcontent-%COMP%]{background:#ef4444;color:#fff}.dashboard-root[_ngcontent-%COMP%]   .link-danger[_ngcontent-%COMP%]{background:transparent;color:#ef4444;border:none;cursor:pointer;text-decoration:underline;padding:0;font-weight:600}.dashboard-root[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]{display:block;width:100%}.dashboard-root[_ngcontent-%COMP%]   .lists[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}@media (min-width: 1024px){.dashboard-root[_ngcontent-%COMP%]   .lists[_ngcontent-%COMP%]{flex-direction:row;align-items:flex-start}.dashboard-root[_ngcontent-%COMP%]   .lists[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]{flex:1}}.text-muted[_ngcontent-%COMP%]{color:#6b7280;font-size:.95rem}.small[_ngcontent-%COMP%]{font-size:.85rem}.dashboard-root[_ngcontent-%COMP%]   .table-wrap[_ngcontent-%COMP%]{overflow-x:auto}.dashboard-root[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{margin-bottom:1rem;font-size:1.5rem;font-weight:700}"]})};export{A as DashboardComponent};
